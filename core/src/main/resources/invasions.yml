#|-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-|#
#|++++++++++++++++++++++++++++++++++++++++++++++++++++++|#
#|                      Invasions                      |#
#|++++++++++++++++++++++++++++++++++++++++++++++++++++|#
#|-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-|#
# https://github.com/CryptoMorin/KingdomsX/wiki/Mechanics#Invasion

# Prevents strong kingdoms from enemying and invading weak kingdoms.
# The person trying to invade/enemy is the primary context of this inequation and the
# person being enemy'd/invaded is the secondary context.
# To disable, set this to "false"
strength-comparison: |
  (kingdoms_structures_total - kingdoms_other_structures_total > 50) ||
  (kingdoms_turrets_total - kingdoms_other_turrets_total > 100) ||
  (kingdoms_claims - kingdoms_other_claims > 50)

# By default, your kingdom can only invade one kingdom at a time.
# 0 means no limit.
simultaneous-invasions: 1

# Whether doing "/k invade" invades multiple lands or just one that the player
# is currently standing in.
multi-chunk-invasion:
  # Ignores unclaimed lands and searches the lands
  # with a simple square algorithm. This ignores any land
  # that doesn't belong to the kingdom which the player is
  # standing on.
  # So 3 means 3x3 = 9 chunks around the player
  # This also ignores any chunks protected by powercells.
  # Set to 1 or 0 to disable
  radius: 1

# This prevents players from running straight to the center
# of claims and invading that area. Players will be forced to
# invade neighboring chunks and fight their way through
# their targetted land. This protection only works
# for lands that have all their sides surrounded by another claim.
# Using this option makes powercells useless for the most part.
adjoining-protection:
  # The chunk radius of the protection. This controls the amount of
  # square ring layers around the chunk that the player wants to invade.
  # If the chunk that the player wants to invade is fully surrounded by
  # the amount of rings specified here (to relax this option, check the option below)
  # then the player won't be able to invade that specific chunk.
  # E.g. 1 -> 3x3 = 9 (including the center chunk), 2 -> 5x5 = 25
  # Set to 0 to completely disable this protection system.
  radius: 0

  # The best way to explain this option is with an example:
  # E.g. When the radius is set to 1 and this is set to 1:
  # If a land has 7 claims around it, it'll still protect this
  # land since it only has 1 missing surrounding claims. (1 radius -> 1 land surrounding each side of
  # a chunk -> 3x3 = 9 -> excluding the target land itself -> 8 lands -> out of these 8 lands around
  # the target chunk one is not claimed -> 7 claimed lands)
  # Be careful with this value as you can technically make a kingdom completely immune to invasions.
  marginal-error-limit: 0

# Resources taken after invading a normal land.
# For nexus land resources there's a separate section.
# Refer to "on-nexus-loss"
bonus:
  # The bonuses get smaller and smaller every time you invade a new land from the same kingdom.
  # These are different when invading the nexus chunk, check below section.
  # You can also use the "ransack" boolean placeholder here.
  resource-points: "kingdoms_resource_points / 5"
  bank: "kingdoms_bank / 10"

# Options for when a nexus land is invaded.
on-nexus-loss:
  disband: false
  drop-nexus-chest-items: false

  # Bonuses given to the invader
  resource-points: "kingdoms_resource_points / 2"
  bank: "kingdoms_bank / 2"

  # For cosmetic purposes only.
  lightning:
    times: 3
    # In ticks
    interval: 10
    amount: 3

# Required resource points to invade a kingdom.
# This is different when using ransack mode, check above.
# You can also use the "ransack" and kingdoms_masswar_is_running boolean placeholders here.
costs:
  resource-points: 'eq(kingdoms_masswar_is_running, 1, 0, eq(ransack, 1, 40, 50))'
  money: 0

pacifism:
  # If pacifism system should work at all. Kingdoms that have this option
  # enabled, will keep it, but it'll not have any effects.
  # Note that the option in the nexus settings will still work, so you might
  # want to remove that as well.
  enabled: true

  # If kingdoms should be pacifist by default.
  # For turret related settings, go to turrets.yml
  default: false

  # Disable PvP for pacifist kingdoms. This also protects against potion throwing.
  disable-pvp: true

  # Cooldown before kingdoms can be a pacifist again after their last invasion.
  # Set to 0 to disable.
  cooldown: 7days

shields:
  # You'll lose your kingdom shield if you invade and cannot invade at all if your nation has a shield active.
  disallow-invasions: true

  purchase-cooldown:
    # Requires a restart to update
    # Since the last time the kingdom was hit by a Siege cannon.
    last-siege-cannon-hit: 6hrs

    last-invasion:
      # The last invasion whether it failed or not.
      attacked: 1 day

      # The last defended invasion only if it suceeded.
      defended: 6hrs

  # Disable pvp for kingdoms with shields.
  disable-pvp: false

  # If a kingdom is in a nation with an active shield, but wants to invade
  # instead of disabling the whole nation's shield, it'll make that specific
  # kingdom to lose access to the nation's shield. Meaning the nation's shield
  # will not be affected, but other kingdoms can invade that specific kingdom.
  nation-shield-access-loss: 10hrs

champions:
  # Players with ceasefire attribute with the kingdom that the
  # champion belongs to, can't damage the champion.
  disable-friendly-damage: true

  # https://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/entity/EntityDamageEvent.DamageCause.html
  disabled-damages:
    - FALL
    - SUFFOCATION

  # One of the following messages will be randomly announced when the champion dies.
  # Each one of the entries indicates a death cause. You can find a list of death causes here:
  # https://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/entity/EntityDamageEvent.DamageCause.html
  # Note: Some damage causes are disabled for champions. This depends on the mob type, or
  # they're disabled from disabled-champion-damages option.
  death-messages:
    # Defaults are used when the death cause is not specified in this list.
    defaults:
      - "&e%kingdoms_other_kingdom_name%'s &cchampion was brutally slashed."
    projectile:
      - "&e%kingdoms_other_kingdom_name%'s &cchampion was shot to death by %player%"
    void:
      - "&e%kingdoms_other_kingdom_name%'s &cchampion somehow managed to fall into the void!"
    entity-attack:
      - "&e%kingdoms_other_kingdom_name%'s &cchampion was slayed by &e%player%"

# https://github.com/CryptoMorin/KingdomsX/wiki/Mechanics#Masswar
masswar:
  enabled: true

  # You can only invade during MassWar events.
  during-masswar-only: false

  # Should misc upgrades be disabled during masswars?
  # The names are the same as the ones in misc-upgrades.yml (the config names, not the 'name' option)
  disable-misc-upgrades: [ anti-explosion ]

  # Allowed/Disallowed commands during the event.
  commands:
    whitelist: false
    list: [ 'k tpa' ]

  # Disable turrets during masswar.
  disable-turrets: false

  # Allow siege cannons to be used only during masswars.
  # If false, this would prevent players from sitting on the cannon altogether.
  allow-siege-cannons: false

  allow-invading:
    # Allow invading pacifist kingdoms during Mass Wars.
    pacifists: false

    # Allow invading shielded kingdoms during Mass Wars.
    shields: true

  # "hour:minute" format to start MassWars every day at the specified
  # time with the time zone ID being the one specified in config.yml
  # - If you want masswar to start at 1 PM (13:00) you have to set this option to "13:00"
  # [!] After setting this option, you HAVE TO change "interval" option to days. For example, just "1 day"
  start: ~
  # These times will reset on server restart.
  # The interval between each MassWar. This interval persists between server restarts too.
  # When "start" option is used this option has to be defined in days.
  interval: 12hrs
  # The duration of the MassWar. The interval starts after this time has ended.
  time: 1hr

  bossbar:
    enabled: true
    title: "&4&lMasswar &8[&6%time%&8]"
    color: RED
    style: SEGMENTED_20
  titles:
    start:
      title: "&4Masswar"
      subtitle: "&eMasswar has started!"
      fade-in: 20
      stay: 60
      fade-out: 20
    end:
      title: "&2Masswar"
      subtitle: "&6Masswar has ended!"
      fade-in: 20
      stay: 60
      fade-out: 20

# /k tp
teleportation:
  # Used to prevent players from escaping PvP in seconds.
  # Teleportation will be cancelled if the player gets damaged.
  # Set to 0 to disable.
  # This can also be upgraded as a misc upgrade.
  # Note that this option is in seconds and doesn't support time suffixes like other config options.
  teleport-delay: 5

  # If true, it'll send the message every one second with the new timer
  # otherwise it'll only send the message once.
  use-timer-message: true

  # If the player should stand still without moving
  # when teleporting to home, otherwise cancels the teleportation.
  should-not-move: true
  # If the player should not take damage when teleporting to home.
  should-not-be-damaged: true

# The BossBar shown to nearby players for the chmapion.
# This bossbar is also used for attackers during plunder invasions.
# Multiple champions will show multiple bossbars of course.
bossbar:
  enabled: true

  # Should the bossbar be displayed only for nearby players around the champion/invasion area
  # or set to 0 for all the online members of the defender and attacker kingdoms.
  range: 50

  # For champion invasions if set to true, this will keep increasing the progress bar, and the champion is dead once the bar is full,
  # otherwise if set to false, the champion is dead once the progress bar is empty.
  # Same for plunder invasions, but for your opponent's lives.
  reverse-progress: true

  title: "&2Champion Health &8[&6%health%&7/&6%max_health%&8]"
  color: GREEN
  style: SEGMENTED_20
  flags: [ PLAY_BOSS_MUSIC ]

# https://github.com/CryptoMorin/KingdomsX/wiki/Introductions#nations
nations:
  # If a kingodm is in a nation, it'll use the capital's champion for invasions.
  use-capital-champion: true

  # Force nation members (kingdoms) to use nation shields instead.
  # If this is enabled and a nation doesn't have a shield, but the kingdom does,
  # players will be still able to invade the kingdom.
  use-shield: true

  # https://github.com/CryptoMorin/KingdomsX/wiki/Introduction#nation-zones
  # Set to zero to disable.
  nation-zone-radius: 2

  capital-protection:
    # The land radius around the capital kingdom's nexus to protect from
    # invaders before the nation kingdoms nexus lands are invaded.
    # Set to 0 to protect all the capital lands.
    # Set to -1 to disable.
    radius: 0

    # The cooldown for each invaded kingdom nexus land.
    nexus-invasion-cooldown: 1 day

home:
  # Remove home if it's set on the invaded land.
  remove: false

  # Move the home as far as possible from the invaded land.
  move: true

  # Disallow teleports when a kingdoms home is being invaded
  # and the home is open to public.
  disallow-public-teleportation: true

# Should the champion spawn where the player did "/k invade"
# If set to false, the champion will spawn near the player wherever they
# currently are after the countdown ends.
initial-location: true

countdown:
  # Countdown before the champion spawns or the invasion starts in general in seconds.
  # Set to 0 to disable.
  seconds: 5

  # Should a countdown message be also displayed for
  # the defending kingdom?
  show-to-defender: true

  # The sound played for each countdown.
  # To disable this, set the option entry to ~
  sound:
    0: ENTITY_ENDER_DRAGON_GROWL, 10
    1: ENTITY_EXPERIENCE_ORB_PICKUP, 10, 2.0
    2: ENTITY_EXPERIENCE_ORB_PICKUP, 10, 1.75
    3: ENTITY_EXPERIENCE_ORB_PICKUP, 10, 1.5
    4: ENTITY_EXPERIENCE_ORB_PICKUP, 10, 1.25
    5: ENTITY_EXPERIENCE_ORB_PICKUP, 10, 1.0

# The cooldown for a kingdom when they fail to invade a kingdom,
# and they want to try again.
# Set to 0 to disable.
cooldowns:
  failed: 5min
  successful: 0

# The amount of time that the invader kingdom needs to wait before unclaiming
# the land they invaded.
# This only applies to /k unclaim, they can still do /k disband and /k unclaimall
unclaim-cooldown: 0

# Disallowed items during an invasion for the invader.
items:
  whitelist: false
  # For ender pearls and other teleportation items, use the allow-teleportation option.
  list: [ ]

allow:
  # Disallows any teleportation. Whether it's from commands, plugins, portals and etc...
  # Note that the player still can't teleport to other worlds if this option is true. This is used to
  # prevent people from using end and nether portals, which can cause some issues due to the player world and the champion's world differing.
  teleportation: false

  # Allow the invader to use elytra during invasions.
  # It's possible to use this to escape without the drag event.
  # But this is also useful for other invasion systems.
  elytra: false

  # Allow block explosion during invasions only on the invading land?
  # This will not break turrets, structures or protected chests.
  explosion: false

  # Allow building during invasions.
  # This only applies to the land that was invaded.
  # This does not allow interactions (such as opening chests)
  building: false

  # Disallow kingdoms to move their kingdom nexus when their nexus land is being invaded.
  moving-nexus: false

# Disallowed/allowed commands during invasions for the invader player and the kingdom that is being invaded.
commands:
  execute:
    before: [ ]
    after-successful: [ ]
    after-fail: [ ]

  # This option can detect main command aliases and block them all as a part of the list below.
  # Note that subcommands cannot be detected as they're registered on the plugin, not on the server.
  smart-command: true

  invader:
    # If the list below should act as a whitelist or blacklist.
    whitelist: false

    # Whether this restriction should only be applied to the invader player
    # or the whole kingdom that the invader belongs to.
    kingdom-wide: false

    # Command names ignore slash "/" and are case-insensitive.
    # This checks if the commmand "starts with" with one of
    # the elements in the list, so it supports arguments.
    # You have to add all the aliases for that specific command or subcommand.
    # Note that "pluginname:command" is also a valid command unless you blocked those entirely.
    list:
      - k home
      - k spawn
      - kingdom home
      - kingdom spawn
      - kingdoms home
      - kingdoms spawn
      - k nation spawn
      - k nation home
      - tp
      - tpa
      - tpaccept
      - tpahere
      - rtp
      - randomtp
      - randomteleport
      - k fly
      - k pvp

  # This applies to the whole kingdom.
  defender:
    whitelist: false
    list: [ ]

# /k surrender
surrender:
  # If the attacker can surrender. The champion will despawn.
  attacker: true
  # If the defender kingdom can surrender. The champion will despawn and the
  # land that's being invaded will be for the invaders.
  defender: true
  # Return resource points of the invader surrendered?
  refund:
    resource-points: false
    money: false

# Time limit for defeating the champion. Set to 0 to disable.
# If this time limit ends, the champion will despawn and invaders will lose.
# Default time unit is minutes.
time-limit:
  default: 30mins
  # For defeating the nexus champion.
  nexus: 15mins

  # Show the time limit progress with a bossbar.
  # Read the previous bossbar for more info.
  # The "range" of this bossbar is always the same as the previous one.
  bossbar:
    enabled: true

    # Special placeholders are the same as the previous bossbar.
    title: "&5âŒ› &8[&d%time%&8] &5âŒ›"
    color: PURPLE
    style: SOLID

# Minimium members needed to be online to start the invasion.
# This supports AuthMe authentication system.
# For a better experience consider using the %kingdoms_members% placeholder
# as a fraction and with conditional functions to prevent players from abusing this feature.
online-members:
  invader: 0
  defender: 0

# Only stop invasion if the defending kingdom members die the amount of times.
# The invaders will win by default.
# This is not recommended as members in the defending kingdom can betray.
# For plunders, This number is the amount of kills a kingdom has to get in order to win the battle.
# Set to 0 to disable.
player-deaths:
  defender: 0
  attacker: 0 # This option has no effect for the standard invasion method.

  # Should the defender keep these when they die?
  # This works for both attackers and defenders for plunders.
  keep:
    # Changing the enabled option to false stops kingdoms from interfering
    # with these other options, so other plugins can handle them.
    enabled: false

    inventory: false
    xp: false

# https://github.com/CryptoMorin/KingdomsX/wiki/Mechanics#plunders
plunder:
  enabled: false

  # The allowed y range which the players need to stand on for it
  # to count towards the caputre progress.
  vertical-boundaries:
    enabled: true

    # These are calculated from the place where the player used /k invade
    # It's recommended to keep these values above 10 to account for steep mountains.
    # If the invasion is taken place on a cliff, players will have to go where the invader initially started.
    upwards: 20
    downwards: 10

  # The champion mechanics will stay the same. Meaning if the champion is killed the invasion ends
  # and the invaders win, however the champion doesn't need to be killed if the defenders or attackers
  # get enough kills for the invasion to end.
  keep-champion: false

  # Whether killing these players during plunder invasions
  # increases the score of the other team and vice versa.
  participants:
    nation: true
    allies: true
    truces: false

  particles:
    enabled: true
    states:
      capturing:
        particle: REDSTONE
        count: 5
        color: 255, 0, 0
        size: 2
      protected:
        particle: REDSTONE
        count: 0
        offset: 0, 5, 0
        color: 0, 0, 255
        extra: 2
        size: 2

  # This is only for attackers.
  # This is different from win by deaths. Read the wiki for more info.
  capture-progress:
    increment: 0.1 # This happens every tick
    goal: 100 # after this, attackers win

    # Should the capture progress ratio consider kingdom guards
    # and soldiers of the defender?
    consider-kingdom-mobs: true

    bossbar:
      # Which boss bar should the capture progress use to show the progress since it doesn't have its own bossbar?
      # none: None of the bossbars if you want to use the placeholders instead.
      # timer: The time limit bossbar.
      # normal: Use the progress on the normal bossbar of defender and attackers
      use: normal

      # This color is applied to whichever bossbar the above option points to.
      state-colors:
        capturing: RED
        protected: BLUE

  # The enabled and range option are the same as the main bossbar option.
  # The attacker's bossbar is the default bossbar used for champions.
  # That means during plunder invasions attackers and invaders have different bossbars.
  defender-bossbar:
    title: "&câš” %attacker-lives-left% &8| &2%defender-lives-left% ðŸ›¡ &7âˆ« &6%capture-progress%&8/&6%capture-progress-goal%"
    color: RED
    style: SEGMENTED_20

# Read the /k challenge GUI for more info.
# Or read: https://github.com/CryptoMorin/KingdomsX/wiki/Commands#k-challenge
# If you set the minimum required defenders option, sending a
# challenge request is not needed if that requirement is met.
challenges:
  enabled: false

  # The duration which the kingdom can invade
  # once the challenge time starts.
  duration: 6hrs
